(this.webpackJsonpclient_shop=this.webpackJsonpclient_shop||[]).push([[8],{143:function(e,t,c){"use strict";function s(e){for(var t=e+"",c="",s=0,a=t.length-1;a>=0;a--)s++,c=t[a]+c,s%3===0&&0!==a&&(c="."+c,s=0);return c}c.d(t,"a",(function(){return s}))},145:function(e,t,c){"use strict";var s=c(18),a=(localStorage.getItem("token"),{getCarts:function(e){var t="/carts".concat(e);return s.a.get(t)},postAddToCart:function(e){return s.a.post("/add-to-cart/",JSON.stringify(e))},deleteToCart:function(e){var t="/carts/delete".concat(e);return s.a.delete(t)},putToCart:function(e){var t="/carts/update".concat(e);return s.a.put(t)}});t.a=a},236:function(e,t,c){"use strict";c.r(t);var s=c(0),a=c(11),r=c.n(a),n=c(19),l=c(9),i=c(1),o=c(17),d=c(46),u=c(5),j=c(143);function b(e){var t=e.listCart,c=e.onDeleteCart,a=e.onUpdateCount,r=function(e){console.log(e.target.value)};return Object(s.jsx)("div",{className:"table-responsive mb-4",children:Object(s.jsxs)("table",{className:"table",children:[Object(s.jsx)("thead",{className:"bg-light",children:Object(s.jsxs)("tr",{className:"text-center",children:[Object(s.jsxs)("th",{className:"border-0",scope:"col",children:[" ",Object(s.jsx)("strong",{className:"text-small text-uppercase",children:"Image"})]}),Object(s.jsxs)("th",{className:"border-0",scope:"col",children:[" ",Object(s.jsx)("strong",{className:"text-small text-uppercase",children:"Product"})]}),Object(s.jsxs)("th",{className:"border-0",scope:"col",children:[" ",Object(s.jsx)("strong",{className:"text-small text-uppercase",children:"Price"})]}),Object(s.jsxs)("th",{className:"border-0",scope:"col",children:[" ",Object(s.jsx)("strong",{className:"text-small text-uppercase",children:"Quantity"})]}),Object(s.jsxs)("th",{className:"border-0",scope:"col",children:[" ",Object(s.jsx)("strong",{className:"text-small text-uppercase",children:"Total"})]}),Object(s.jsxs)("th",{className:"border-0",scope:"col",children:[" ",Object(s.jsx)("strong",{className:"text-small text-uppercase",children:"Remove"})]})]})}),Object(s.jsx)("tbody",{children:t&&t.map((function(e,t){return Object(s.jsxs)("tr",{className:"text-center",children:[Object(s.jsx)("td",{className:"pl-0 border-0",children:Object(s.jsx)("div",{className:"media align-items-center justify-content-center",children:Object(s.jsx)(u.b,{className:"reset-anchor d-block animsition-link",to:"/detail/".concat(e.idProduct),children:Object(s.jsx)("img",{src:e.imgProduct,alt:"...",width:"70"})})})}),Object(s.jsx)("td",{className:"align-middle border-0",children:Object(s.jsx)("div",{className:"media align-items-center justify-content-center",children:Object(s.jsx)(u.b,{className:"reset-anchor h6 animsition-link",to:"/detail/".concat(e.idProduct),children:e.nameProduct})})}),Object(s.jsx)("td",{className:"align-middle border-0",children:Object(s.jsxs)("p",{className:"mb-0 small",children:[Object(j.a)(e.priceProduct)," VND"]})}),Object(s.jsx)("td",{className:"align-middle border-0",children:Object(s.jsxs)("div",{className:"quantity justify-content-center",children:[Object(s.jsx)("button",{className:"dec-btn p-0",style:{cursor:"pointer"},onClick:function(){return function(e,t){if(a&&1!==t){var c=parseInt(t)-1;a(e,c)}}(e.idProduct,e.count)},children:Object(s.jsx)("i",{className:"fas fa-caret-left"})}),Object(s.jsx)("input",{className:"form-control form-control-sm border-0 shadow-0 p-0",type:"text",value:e.count,onChange:r}),Object(s.jsx)("button",{className:"inc-btn p-0",style:{cursor:"pointer"},onClick:function(){return function(e,t){if(a){var c=parseInt(t)+1;a(e,c)}}(e.idProduct,e.count)},children:Object(s.jsx)("i",{className:"fas fa-caret-right"})})]})}),Object(s.jsx)("td",{className:"align-middle border-0",children:Object(s.jsxs)("p",{className:"mb-0 small",children:[Object(j.a)(parseInt(e.priceProduct)*parseInt(e.count))," ","VND"]})}),Object(s.jsx)("td",{className:"align-middle border-0",children:Object(s.jsx)("a",{className:"reset-anchor remove_cart",style:{cursor:"pointer"},onClick:function(){return t=e.idProduct,void(c&&c(t,s));var t,s},children:Object(s.jsx)("i",{className:"fas fa-trash-alt small text-muted"})})})]},t)}))})]})})}b.defaultProps={listCart:[],onDeleteCart:null,onUpdateCount:null};var m=b,h=c(152),x=c.n(h),p=c(3),g=c(145),O=c(33),f=c.n(O);t.default=function(e){Object(o.c)((function(e){return e.Cart.id_user}));var t=Object(o.c)((function(e){return e.Cart.listCart})),c=Object(i.useState)([]),a=Object(l.a)(c,2),b=a[0],h=a[1],O=Object(i.useState)(),N=Object(l.a)(O,2),v=N[0],C=N[1],y=Object(o.b)(),P=Object(i.useState)({idProduct:"",count:""}),S=Object(l.a)(P,2),I=S[0],k=S[1],w=Object(i.useState)(!1),_=Object(l.a)(w,2),T=_[0],U=_[1];function D(e){var t=0;e.map((function(e){return t+=parseInt(e.priceProduct)*parseInt(e.count)}));C(t)}Object(i.useEffect)((function(){localStorage.getItem("id_user")||(h(t),D(t))}),[I]),Object(i.useEffect)((function(){(function(){var e=Object(n.a)(r.a.mark((function e(){var t,c,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("id_user")){e.next=10;break}return t={idUser:localStorage.getItem("id_user")},c="?"+f.a.stringify(t),console.log(c),e.next=6,g.a.getCarts(c);case 6:s=e.sent,console.log("cart",s),h(s),D(s);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),U(!1)}),[T]);var V=Object(i.useState)(!1),B=Object(l.a)(V,2),H=B[0],L=B[1];return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsx)("section",{className:"py-5 bg-light",children:Object(s.jsx)("div",{className:"container",children:Object(s.jsxs)("div",{className:"row px-4 px-lg-5 py-lg-4 align-items-center",children:[Object(s.jsx)("div",{className:"col-lg-6",children:Object(s.jsx)("h1",{className:"h2 text-uppercase mb-0",children:"Cart"})}),Object(s.jsx)("div",{className:"col-lg-6 text-lg-right",children:Object(s.jsx)("nav",{"aria-label":"breadcrumb",children:Object(s.jsx)("ol",{className:"breadcrumb justify-content-lg-end mb-0 px-0",children:Object(s.jsx)("li",{className:"breadcrumb-item active","aria-current":"page",children:"Cart"})})})})]})})}),Object(s.jsxs)("section",{className:"py-5",children:[Object(s.jsx)("h2",{className:"h5 text-uppercase mb-4",children:"Shopping cart"}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("div",{className:"col-lg-8 mb-4 mb-lg-0",children:[Object(s.jsx)(m,{listCart:b,onDeleteCart:function(e){if(console.log("idUser: "+localStorage.getItem("id_user"),"idProduct: "+e),localStorage.getItem("id_user")){(function(){var t=Object(n.a)(r.a.mark((function t(){var c,s,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={idUser:localStorage.getItem("id_user"),idProduct:e},s="?"+f.a.stringify(c),t.next=4,g.a.deleteToCart(s);case 4:a=t.sent,console.log(a),U(!0);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()(),x.a.set("notifier","position","bottom-left"),x.a.error("B\u1ea1n \u0110\xe3 X\xf3a H\xe0ng Th\xe0nh C\xf4ng!")}else{var t={idProduct:e,idUser:localStorage.getItem("id_user")},c=Object(d.c)(t);y(c),x.a.set("notifier","position","bottom-left"),x.a.error("B\u1ea1n \u0110\xe3 X\xf3a H\xe0ng Th\xe0nh C\xf4ng!"),k({idProduct:e,count:""})}},onUpdateCount:function(e,t){if(console.log("Count: "+t+", idUser: "+localStorage.getItem("id_user")+", idProduct: "+e),localStorage.getItem("id_user")){(function(){var c=Object(n.a)(r.a.mark((function c(){var s,a,n;return r.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return s={idUser:localStorage.getItem("id_user"),idProduct:e,count:t},a="?"+f.a.stringify(s),c.next=4,g.a.putToCart(a);case 4:n=c.sent,console.log(n),U(!0);case 7:case"end":return c.stop()}}),c)})));return function(){return c.apply(this,arguments)}})()(),console.log("Ban Da Dang Nhap!"),x.a.set("notifier","position","bottom-left"),x.a.success("B\u1ea1n \u0110\xe3 S\u1eeda H\xe0ng Th\xe0nh C\xf4ng!")}else{var c={idProduct:e,idUser:localStorage.getItem("id_user"),count:t},s=Object(d.d)(c);y(s),x.a.set("notifier","position","bottom-left"),x.a.success("B\u1ea1n \u0110\xe3 S\u1eeda H\xe0ng Th\xe0nh C\xf4ng!"),k({idProduct:e,count:t})}}}),Object(s.jsx)("div",{className:"bg-light px-4 py-3",children:Object(s.jsxs)("div",{className:"row align-items-center text-center",children:[Object(s.jsx)("div",{className:"col-md-6 mb-3 mb-md-0 text-md-left",children:Object(s.jsxs)(u.b,{className:"btn btn-link p-0 text-dark btn-sm",to:"/shop",children:[Object(s.jsx)("i",{className:"fas fa-long-arrow-alt-left mr-2",children:" "}),"Continue shopping"]})}),Object(s.jsxs)("div",{className:"col-md-6 text-md-right",children:[H&&Object(s.jsx)(p.a,{to:"/checkout"}),Object(s.jsxs)("span",{className:"btn btn-outline-dark btn-sm",onClick:function(){return localStorage.getItem("id_user")?0===b.length?(x.a.set("notifier","position","bottom-left"),void x.a.error("Vui L\xf2ng Ki\u1ec3m Tra L\u1ea1i Gi\u1ecf H\xe0ng!")):void L(!0):(x.a.set("notifier","position","bottom-left"),void x.a.error("Vui L\xf2ng Ki\u1ec3m Tra L\u1ea1i \u0110\u0103ng Nh\u1eadp!"))},children:["Proceed to checkout",Object(s.jsx)("i",{className:"fas fa-long-arrow-alt-right ml-2"})]})]})]})})]}),Object(s.jsx)("div",{className:"col-lg-4",children:Object(s.jsx)("div",{className:"card border-0 rounded-0 p-lg-4 bg-light",children:Object(s.jsxs)("div",{className:"card-body",children:[Object(s.jsx)("h5",{className:"text-uppercase mb-4",children:"Cart total"}),Object(s.jsxs)("ul",{className:"list-unstyled mb-0",children:[Object(s.jsxs)("li",{className:"d-flex align-items-center justify-content-between",children:[Object(s.jsx)("strong",{className:"text-uppercase small font-weight-bold",children:"Subtotal"}),Object(s.jsxs)("span",{className:"text-muted small",children:[Object(j.a)(v)," VND"]})]}),Object(s.jsx)("li",{className:"border-bottom my-2"}),Object(s.jsxs)("li",{className:"d-flex align-items-center justify-content-between mb-4",children:[Object(s.jsx)("strong",{className:"text-uppercase small font-weight-bold",children:"Total"}),Object(s.jsxs)("span",{children:[Object(j.a)(v)," VND"]})]})]})]})})})]})]})]})}}}]);
//# sourceMappingURL=8.83a2b2f9.chunk.js.map