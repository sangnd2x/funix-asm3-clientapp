{"version":3,"sources":["convertMoney.js","API/CartAPI.jsx","Cart/Component/ListCart.jsx","Cart/Cart.jsx"],"names":["convertMoney","money","str","output","count","i","length","CartAPI","localStorage","getItem","getCarts","query","url","axiosClient","get","postAddToCart","data","post","JSON","stringify","deleteToCart","delete","putToCart","put","ListCart","props","listCart","onDeleteCart","onUpdateCount","handlerChangeText","e","console","log","target","value","className","scope","map","index","to","idProduct","src","imgProduct","alt","width","nameProduct","priceProduct","style","cursor","onClick","getIdProduct","getCount","updateCount","parseInt","handlerDown","type","onChange","handlerUp","getUser","getProduct","defaultProps","Cart","useSelector","state","id_user","useState","cart","setCart","total","setTotal","dispatch","useDispatch","loadRedux","setLoadRedux","loadAPI","setLoadAPI","getTotal","carts","sub_total","useEffect","a","params","idUser","queryString","response","fetchData","redirect","setRedirect","aria-label","aria-current","fetchDelete","alertify","set","error","action","deleteCart","fetchPut","success","updateCart"],"mappings":"4GAAe,SAASA,EAAaC,GAKpC,IAJA,IAAMC,EAAMD,EAAQ,GAChBE,EAAS,GAETC,EAAQ,EACHC,EAAIH,EAAII,OAAS,EAAGD,GAAK,EAAGA,IACpCD,IACAD,EAASD,EAAIG,GAAKF,EAEdC,EAAQ,IAAM,GAAW,IAANC,IACtBF,EAAS,IAAMA,EACfC,EAAQ,GAIV,OAAOD,EAfR,mC,iCCAA,YAMMI,GAHyBC,aAAaC,QAAQ,SAGpC,CACfC,SAAU,SAACC,GACV,IAAMC,EAAG,gBAAYD,GACrB,OAAOE,IAAYC,IAAIF,IAGxBG,cAAe,SAACC,GAEf,OAAOH,IAAYI,KADV,gBACoBC,KAAKC,UAAUH,KAG7CI,aAAc,SAACT,GACd,IAAMC,EAAG,uBAAmBD,GAC5B,OAAOE,IAAYQ,OAAOT,IAG3BU,UAAW,SAACX,GACX,IAAMC,EAAG,uBAAmBD,GAC5B,OAAOE,IAAYU,IAAIX,MAIVL,O,0HCXf,SAASiB,EAASC,GAAQ,IACjBC,EAA0CD,EAA1CC,SAAUC,EAAgCF,EAAhCE,aAAcC,EAAkBH,EAAlBG,cAE1BC,EAAoB,SAACC,GAC1BC,QAAQC,IAAIF,EAAEG,OAAOC,QAqCtB,OACC,qBAAKC,UAAU,wBAAf,SACC,wBAAOA,UAAU,QAAjB,UACC,uBAAOA,UAAU,WAAjB,SACC,qBAAIA,UAAU,cAAd,UACC,qBAAIA,UAAU,WAAWC,MAAM,MAA/B,UACE,IACD,wBAAQD,UAAU,4BAAlB,sBAID,qBAAIA,UAAU,WAAWC,MAAM,MAA/B,UACE,IACD,wBAAQD,UAAU,4BAAlB,wBAID,qBAAIA,UAAU,WAAWC,MAAM,MAA/B,UACE,IACD,wBAAQD,UAAU,4BAAlB,sBAID,qBAAIA,UAAU,WAAWC,MAAM,MAA/B,UACE,IACD,wBAAQD,UAAU,4BAAlB,yBAID,qBAAIA,UAAU,WAAWC,MAAM,MAA/B,UACE,IACD,wBAAQD,UAAU,4BAAlB,sBAID,qBAAIA,UAAU,WAAWC,MAAM,MAA/B,UACE,IACD,wBAAQD,UAAU,4BAAlB,4BAMH,gCACET,GACAA,EAASW,KAAI,SAACH,EAAOI,GAAR,OACZ,qBAAIH,UAAU,cAAd,UACC,oBAAIA,UAAU,gBAAd,SACC,qBAAKA,UAAU,kDAAf,SACC,cAAC,IAAD,CACCA,UAAU,uCACVI,GAAE,kBAAaL,EAAMM,WAFtB,SAGC,qBAAKC,IAAKP,EAAMQ,WAAYC,IAAI,MAAMC,MAAM,aAI/C,oBAAIT,UAAU,wBAAd,SACC,qBAAKA,UAAU,kDAAf,SACC,cAAC,IAAD,CACCA,UAAU,kCACVI,GAAE,kBAAaL,EAAMM,WAFtB,SAGEN,EAAMW,kBAKV,oBAAIV,UAAU,wBAAd,SACC,oBAAGA,UAAU,aAAb,UACEnC,YAAakC,EAAMY,cADrB,YAID,oBAAIX,UAAU,wBAAd,SACC,sBAAKA,UAAU,kCAAf,UACC,wBACCA,UAAU,cACVY,MAAO,CAAEC,OAAQ,WACjBC,QAAS,kBAtGC,SAACC,EAAcC,GAClC,GAAKvB,GAIY,IAAbuB,EAAJ,CAKA,IAAMC,EAAcC,SAASF,GAAY,EAEzCvB,EAAcsB,EAAcE,IA2FlBE,CACCpB,EAAMM,UACNN,EAAM9B,QANT,SASC,mBAAG+B,UAAU,wBAEd,uBACCA,UAAU,qDACVoB,KAAK,OACLrB,MAAOA,EAAM9B,MACboD,SAAU3B,IAEX,wBACCM,UAAU,cACVY,MAAO,CAAEC,OAAQ,WACjBC,QAAS,kBAxGD,SAACC,EAAcC,GAChC,GAAKvB,EAAL,CAKA,IAAMwB,EAAcC,SAASF,GAAY,EAEzCvB,EAAcsB,EAAcE,IAiGlBK,CACCvB,EAAMM,UACNN,EAAM9B,QANT,SASC,mBAAG+B,UAAU,8BAIhB,oBAAIA,UAAU,wBAAd,SACC,oBAAGA,UAAU,aAAb,UACEnC,YACAqD,SAASnB,EAAMY,cACdO,SAASnB,EAAM9B,QACd,IAJJ,WAQD,oBAAI+B,UAAU,wBAAd,SACC,mBACCA,UAAU,2BACVY,MAAO,CAAEC,OAAQ,WACjBC,QAAS,kBAtJKS,EAuJCxB,EAAMM,eAtJxBb,GAILA,EAAa+B,EAASC,IALD,IAACD,EAASC,GAmJxB,SAMC,mBAAGxB,UAAU,4CAzEiBG,aA7FxCd,EAASoC,aAAe,CACvBlC,SAAU,GACVC,aAAc,KACdC,cAAe,MA8KDJ,Q,mDCgHAqC,UAlSf,SAAcpC,GAEGqC,aAAY,SAACC,GAAD,OAAWA,EAAMF,KAAKG,WAAlD,IAGMtC,EAAWoC,aAAY,SAACC,GAAD,OAAWA,EAAMF,KAAKnC,YAL/B,EAOIuC,mBAAS,IAPb,mBAObC,EAPa,KAOPC,EAPO,OASMF,qBATN,mBASbG,EATa,KASNC,EATM,KAWdC,EAAWC,cAXG,EAccN,mBAAS,CAC1CzB,UAAW,GACXpC,MAAO,KAhBY,mBAcboE,EAda,KAcFC,EAdE,OAoBUR,oBAAS,GApBnB,mBAoBbS,EApBa,KAoBJC,EApBI,KAqCpB,SAASC,EAASC,GACjB,IAAIC,EAAY,EAEED,EAAMxC,KAAI,SAACH,GAC5B,OAAQ4C,GACPzB,SAASnB,EAAMY,cAAgBO,SAASnB,EAAM9B,UAGhDiE,EAASS,GArBVC,qBAAU,WAEHvE,aAAaC,QAAQ,aACzB0D,EAAQzC,GAERkD,EAASlD,MAKT,CAAC8C,IAgBJO,qBAAU,YACM,uCAAG,gCAAAC,EAAA,0DACbxE,aAAaC,QAAQ,WADR,wBAEVwE,EAAS,CACdC,OAAQ1E,aAAaC,QAAQ,YAGxBE,EAAQ,IAAMwE,IAAYhE,UAAU8D,GAE1ClD,QAAQC,IAAIrB,GARI,SAUOJ,IAAQG,SAASC,GAVxB,OAUVyE,EAVU,OAWZrD,QAAQC,IAAI,OAAQoD,GACxBjB,EAAQiB,GAERR,EAASQ,GAdO,4CAAH,qDAkBfC,GAEAV,GAAW,KACT,CAACD,IAGJ,IA3EoB,EA0LYT,oBAAS,GA1LrB,mBA0LbqB,EA1La,KA0LHC,EA1LG,KA4MpB,OACC,sBAAKpD,UAAU,YAAf,UACC,yBAASA,UAAU,gBAAnB,SACC,qBAAKA,UAAU,YAAf,SACC,sBAAKA,UAAU,8CAAf,UACC,qBAAKA,UAAU,WAAf,SACC,oBAAIA,UAAU,yBAAd,oBAED,qBAAKA,UAAU,yBAAf,SACC,qBAAKqD,aAAW,aAAhB,SACC,oBAAIrD,UAAU,8CAAd,SACC,oBACCA,UAAU,yBACVsD,eAAa,OAFd,+BAWN,0BAAStD,UAAU,OAAnB,UACC,oBAAIA,UAAU,yBAAd,2BACA,sBAAKA,UAAU,MAAf,UACC,sBAAKA,UAAU,wBAAf,UACC,cAAC,EAAD,CACCT,SAAUwC,EACVvC,aA7Je,SAAEgC,GAGtB,GAFA5B,QAAQC,IAAI,WAAaxB,aAAaC,QAAQ,WAAY,cAAgBkD,GAEtEnD,aAAaC,QAAQ,WAAY,EAInB,uCAAG,gCAAAuE,EAAA,6DACbC,EAAS,CACdC,OAAQ1E,aAAaC,QAAQ,WAC7B+B,UAAWmB,GAGNhD,EAAQ,IAAMwE,IAAYhE,UAAU8D,GANvB,SAQI1E,IAAQa,aAAaT,GARzB,OAQbyE,EARa,OASnBrD,QAAQC,IAAIoD,GAERT,GAAW,GAXI,2CAAH,qDAcjBe,GAGAC,IAASC,IAAI,WAAY,WAAY,eACrCD,IAASE,MAAM,4DACT,CAIN,IAAM7E,EAAO,CACZwB,UAAWmB,EACXuB,OAAQ1E,aAAaC,QAAQ,YAIxBqF,EAASC,YAAW/E,GAC1BsD,EAASwB,GAETH,IAASC,IAAI,WAAY,WAAY,eACrCD,IAASE,MAAM,wDAGfpB,EAAa,CACZjC,UAAWmB,EACXvD,MAAO,OAiHJwB,cA3GgB,SAAC+B,EAAYR,GAUlC,GATApB,QAAQC,IACP,UACCmB,EACA,aACA3C,aAAaC,QAAQ,WACrB,gBACAkD,GAGEnD,aAAaC,QAAQ,WAAY,EAItB,uCAAG,gCAAAuE,EAAA,6DACVC,EAAS,CACdC,OAAQ1E,aAAaC,QAAQ,WAC7B+B,UAAWmB,EACXvD,MAAO+C,GAGFxC,EAAQ,IAAMwE,IAAYhE,UAAU8D,GAP1B,SASO1E,IAAQe,UAAUX,GATzB,OASVyE,EATU,OAUhBrD,QAAQC,IAAIoD,GAERT,GAAW,GAZC,2CAAH,qDAedqB,GAGAjE,QAAQC,IAAI,qBAEZ2D,IAASC,IAAI,WAAY,WAAY,eACrCD,IAASM,QAAQ,8DACX,CAEN,IAAMjF,EAAO,CACZwB,UAAWmB,EACXuB,OAAQ1E,aAAaC,QAAQ,WAC7BL,MAAO+C,GAIF2C,EAASI,YAAWlF,GAC1BsD,EAASwB,GAETH,IAASC,IAAI,WAAY,WAAY,eACrCD,IAASM,QAAQ,0DAGjBxB,EAAa,CACZjC,UAAWmB,EACXvD,MAAO+C,QAwDL,qBAAKhB,UAAU,qBAAf,SACC,sBAAKA,UAAU,qCAAf,UACC,qBAAKA,UAAU,qCAAf,SACC,eAAC,IAAD,CACCA,UAAU,oCACVI,GAAE,QAFH,UAGC,mBAAGJ,UAAU,kCAAb,SACE,MAJH,yBASD,sBAAKA,UAAU,yBAAf,UACEmD,GAAY,cAAC,IAAD,CAAU/C,GAAI,cAC3B,uBACCJ,UAAU,8BACVc,QAhEU,WAClB,OAAKzC,aAAaC,QAAQ,WAMN,IAAhByD,EAAK5D,QACRqF,IAASC,IAAI,WAAY,WAAY,oBACrCD,IAASE,MAAM,8DAIhBN,GAAY,IAXXI,IAASC,IAAI,WAAY,WAAY,oBACrCD,IAASE,MAAM,kEA2DT,gCAIC,mBAAG1D,UAAU,mDAMlB,qBAAKA,UAAU,WAAf,SACC,qBAAKA,UAAU,0CAAf,SACC,sBAAKA,UAAU,YAAf,UACC,oBAAIA,UAAU,sBAAd,wBACA,qBAAIA,UAAU,qBAAd,UACC,qBAAIA,UAAU,oDAAd,UACC,wBAAQA,UAAU,wCAAlB,sBAGA,uBAAMA,UAAU,mBAAhB,UACEnC,YAAaoE,GADf,aAID,oBAAIjC,UAAU,uBACd,qBAAIA,UAAU,yDAAd,UACC,wBAAQA,UAAU,wCAAlB,mBAGA,iCAAOnC,YAAaoE,GAApB","file":"static/js/8.83a2b2f9.chunk.js","sourcesContent":["export default function convertMoney(money) {\n\tconst str = money + \"\";\n\tlet output = \"\"\n\n\tlet count = 0;\n\tfor (let i = str.length - 1; i >= 0; i--) {\n\t\tcount++;\n\t\toutput = str[i] + output\n\n\t\tif (count % 3 === 0 && i !== 0) {\n\t\t\toutput = \".\" + output\n\t\t\tcount = 0;\n\t\t}\n\t}\n\n\treturn output;\n}\n","import axiosClient from './axiosClient';\n\nconst headers = {\n  'authorization': 'Bearer ' + localStorage.getItem('token')\n}\n\nconst CartAPI = {\n\tgetCarts: (query) => {\n\t\tconst url = `/carts${query}`;\n\t\treturn axiosClient.get(url);\n\t},\n\n\tpostAddToCart: (data) => {\n\t\tconst url = `/add-to-cart/`;\n\t\treturn axiosClient.post(url, JSON.stringify(data));\n\t},\n\n\tdeleteToCart: (query) => {\n\t\tconst url = `/carts/delete${query}`;\n\t\treturn axiosClient.delete(url);\n\t},\n\n\tputToCart: (query) => {\n\t\tconst url = `/carts/update${query}`;\n\t\treturn axiosClient.put(url);\n\t},\n};\n\nexport default CartAPI;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\nimport convertMoney from '../../convertMoney';\n\nListCart.propTypes = {\n\tlistCart: PropTypes.array,\n\tonDeleteCart: PropTypes.func,\n\tonUpdateCount: PropTypes.func,\n};\n\nListCart.defaultProps = {\n\tlistCart: [],\n\tonDeleteCart: null,\n\tonUpdateCount: null,\n};\n\nfunction ListCart(props) {\n\tconst { listCart, onDeleteCart, onUpdateCount } = props;\n\n\tconst handlerChangeText = (e) => {\n\t\tconsole.log(e.target.value);\n\t};\n\n\tconst handlerDelete = (getUser, getProduct) => {\n\t\tif (!onDeleteCart) {\n\t\t\treturn;\n\t\t}\n\n\t\tonDeleteCart(getUser, getProduct);\n\t};\n\n\tconst handlerDown = (getIdProduct, getCount) => {\n\t\tif (!onUpdateCount) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (getCount === 1) {\n\t\t\treturn;\n\t\t}\n\n\t\t//Trước khi trả dữ liệu về component cha thì phải thay đổi biến count\n\t\tconst updateCount = parseInt(getCount) - 1;\n\n\t\tonUpdateCount(getIdProduct, updateCount);\n\t};\n\n\tconst handlerUp = (getIdProduct, getCount) => {\n\t\tif (!onUpdateCount) {\n\t\t\treturn;\n\t\t}\n\n\t\t//Trước khi trả dữ liệu về component cha thì phải thay đổi biến count\n\t\tconst updateCount = parseInt(getCount) + 1;\n\n\t\tonUpdateCount(getIdProduct, updateCount);\n\t};\n\n\treturn (\n\t\t<div className='table-responsive mb-4'>\n\t\t\t<table className='table'>\n\t\t\t\t<thead className='bg-light'>\n\t\t\t\t\t<tr className='text-center'>\n\t\t\t\t\t\t<th className='border-0' scope='col'>\n\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t<strong className='text-small text-uppercase'>\n\t\t\t\t\t\t\t\tImage\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th className='border-0' scope='col'>\n\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t<strong className='text-small text-uppercase'>\n\t\t\t\t\t\t\t\tProduct\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th className='border-0' scope='col'>\n\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t<strong className='text-small text-uppercase'>\n\t\t\t\t\t\t\t\tPrice\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th className='border-0' scope='col'>\n\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t<strong className='text-small text-uppercase'>\n\t\t\t\t\t\t\t\tQuantity\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th className='border-0' scope='col'>\n\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t<strong className='text-small text-uppercase'>\n\t\t\t\t\t\t\t\tTotal\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t\t<th className='border-0' scope='col'>\n\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t<strong className='text-small text-uppercase'>\n\t\t\t\t\t\t\t\tRemove\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t</th>\n\t\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t\t{listCart &&\n\t\t\t\t\t\tlistCart.map((value, index) => (\n\t\t\t\t\t\t\t<tr className='text-center' key={index}>\n\t\t\t\t\t\t\t\t<td className='pl-0 border-0'>\n\t\t\t\t\t\t\t\t\t<div className='media align-items-center justify-content-center'>\n\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\tclassName='reset-anchor d-block animsition-link'\n\t\t\t\t\t\t\t\t\t\t\tto={`/detail/${value.idProduct}`}>\n\t\t\t\t\t\t\t\t\t\t\t<img src={value.imgProduct} alt='...' width='70' />\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td className='align-middle border-0'>\n\t\t\t\t\t\t\t\t\t<div className='media align-items-center justify-content-center'>\n\t\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\t\tclassName='reset-anchor h6 animsition-link'\n\t\t\t\t\t\t\t\t\t\t\tto={`/detail/${value.idProduct}`}>\n\t\t\t\t\t\t\t\t\t\t\t{value.nameProduct}\n\t\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\n\t\t\t\t\t\t\t\t<td className='align-middle border-0'>\n\t\t\t\t\t\t\t\t\t<p className='mb-0 small'>\n\t\t\t\t\t\t\t\t\t\t{convertMoney(value.priceProduct)} VND\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td className='align-middle border-0'>\n\t\t\t\t\t\t\t\t\t<div className='quantity justify-content-center'>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName='dec-btn p-0'\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\thandlerDown(\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue.idProduct,\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue.count\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-caret-left'></i>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tclassName='form-control form-control-sm border-0 shadow-0 p-0'\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\t\t\tvalue={value.count}\n\t\t\t\t\t\t\t\t\t\t\tonChange={handlerChangeText}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\t\tclassName='inc-btn p-0'\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\t\thandlerUp(\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue.idProduct,\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue.count\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t\t<i className='fas fa-caret-right'></i>\n\t\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td className='align-middle border-0'>\n\t\t\t\t\t\t\t\t\t<p className='mb-0 small'>\n\t\t\t\t\t\t\t\t\t\t{convertMoney(\n\t\t\t\t\t\t\t\t\t\t\tparseInt(value.priceProduct) *\n\t\t\t\t\t\t\t\t\t\t\t\tparseInt(value.count)\n\t\t\t\t\t\t\t\t\t\t)}{' '}\n\t\t\t\t\t\t\t\t\t\tVND\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t<td className='align-middle border-0'>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclassName='reset-anchor remove_cart'\n\t\t\t\t\t\t\t\t\t\tstyle={{ cursor: 'pointer' }}\n\t\t\t\t\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\t\t\t\t\thandlerDelete(value.idProduct)\n\t\t\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-trash-alt small text-muted'></i>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t);\n}\n\nexport default ListCart;\n","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { deleteCart, updateCart } from '../Redux/Action/ActionCart';\nimport ListCart from './Component/ListCart';\nimport alertify from 'alertifyjs';\nimport { Link, Redirect } from 'react-router-dom';\nimport CartAPI from '../API/CartAPI';\nimport queryString from 'query-string';\nimport convertMoney from '../convertMoney';\n\nfunction Cart(props) {\n\t//id_user được lấy từ redux\n\tconst id_user = useSelector((state) => state.Cart.id_user);\n\n\t//listCart được lấy từ redux\n\tconst listCart = useSelector((state) => state.Cart.listCart);\n\n\tconst [cart, setCart] = useState([]);\n\n\tconst [total, setTotal] = useState();\n\n\tconst dispatch = useDispatch();\n\n\t//State dùng để Load dữ liệu từ Redux\n\tconst [loadRedux, setLoadRedux] = useState({\n\t\tidProduct: '',\n\t\tcount: '',\n\t});\n\n\t//State dùng để Load dữ liệu từ API\n\tconst [loadAPI, setLoadAPI] = useState(false);\n\n\t//Hàm này dùng để Load dữ liệu ở Redux\n\t//Khi người dùng chưa đăng nhập\n\tuseEffect(() => {\n\t\tconst fetchDataRedux = () => {\n\t\t\tif (!localStorage.getItem('id_user')) {\n\t\t\t\tsetCart(listCart);\n\n\t\t\t\tgetTotal(listCart);\n\t\t\t}\n\t\t};\n\n\t\tfetchDataRedux();\n\t}, [loadRedux]);\n\n\t//Hàm này dùng để tính tổng tiền carts\n\tfunction getTotal(carts) {\n\t\tlet sub_total = 0;\n\n\t\tconst sum_total = carts.map((value) => {\n\t\t\treturn (sub_total +=\n\t\t\t\tparseInt(value.priceProduct) * parseInt(value.count));\n\t\t});\n\n\t\tsetTotal(sub_total);\n\t}\n\n\t//Hàm này dùng để load dữ liệu từ API\n\t//Khi người dùng đã đăng nhập\n\tuseEffect(() => {\n\t\tconst fetchData = async () => {\n\t\t\tif (localStorage.getItem('id_user')) {\n\t\t\t\tconst params = {\n\t\t\t\t\tidUser: localStorage.getItem('id_user'),\n\t\t\t\t};\n\n\t\t\t\tconst query = '?' + queryString.stringify(params);\n\n\t\t\t\tconsole.log(query);\n\n\t\t\t\tconst response = await CartAPI.getCarts(query);\n        console.log('cart', response)\n\t\t\t\tsetCart(response);\n\n\t\t\t\tgetTotal(response);\n\t\t\t}\n\t\t};\n\n\t\tfetchData();\n\n\t\tsetLoadAPI(false);\n\t}, [loadAPI]);\n\n\t//Hàm này dùng để truyền xuống cho component con xử và trả ngược dữ liệu lại component cha\n\tconst onDeleteCart = ( getProduct) => {\n\t\tconsole.log('idUser: ' + localStorage.getItem('id_user'), 'idProduct: ' + getProduct);\n\n\t\tif (localStorage.getItem('id_user')) {\n\t\t\t// user đã đăng nhập\n\n\t\t\t//Sau khi nhận được dữ liệu ở component con truyền lên thì sẽ gọi API xử lý dữ liệu\n\t\t\tconst fetchDelete = async () => {\n\t\t\t\tconst params = {\n\t\t\t\t\tidUser: localStorage.getItem('id_user'),\n\t\t\t\t\tidProduct: getProduct,\n\t\t\t\t};\n\n\t\t\t\tconst query = '?' + queryString.stringify(params);\n\n\t\t\t\tconst response = await CartAPI.deleteToCart(query);\n\t\t\t\tconsole.log(response);\n        //Sau đó thay đổi state loadAPI và load lại hàm useEffect\n        setLoadAPI(true);\n\t\t\t};\n\n\t\t\tfetchDelete();\n\n\n\t\t\talertify.set('notifier', 'position', 'bottom-left');\n\t\t\talertify.error('Bạn Đã Xóa Hàng Thành Công!');\n\t\t} else {\n\t\t\t// user chưa đăng nhập\n\n\t\t\t//Nếu không có phiên làm việc của Session User thì mình sẽ xử lý với Redux\n\t\t\tconst data = {\n\t\t\t\tidProduct: getProduct,\n\t\t\t\tidUser: localStorage.getItem('id_user'),\n\t\t\t};\n\n\t\t\t//Đưa dữ liệu vào Redux\n\t\t\tconst action = deleteCart(data);\n\t\t\tdispatch(action);\n\n\t\t\talertify.set('notifier', 'position', 'bottom-left');\n\t\t\talertify.error('Bạn Đã Xóa Hàng Thành Công!');\n\n\t\t\t//set state loadRedux để nó load lại hàm useEffect để tiếp tục lấy dữ liệu từ redux\n\t\t\tsetLoadRedux({\n\t\t\t\tidProduct: getProduct,\n\t\t\t\tcount: '',\n\t\t\t});\n\t\t}\n\t};\n\n\t//Hàm này dùng để truyền xuống cho component con xử và trả ngược dữ liệu lại component cha\n\tconst onUpdateCount = (getProduct, getCount) => {\n\t\tconsole.log(\n\t\t\t'Count: ' +\n\t\t\t\tgetCount +\n\t\t\t\t', idUser: ' +\n\t\t\t\tlocalStorage.getItem('id_user') +\n\t\t\t\t', idProduct: ' +\n\t\t\t\tgetProduct\n\t\t);\n\n\t\tif (localStorage.getItem('id_user')) {\n\t\t\t// user đã đăng nhập\n\n\t\t\t//Sau khi nhận được dữ liệu ở component con truyền lên thì sẽ gọi API xử lý dữ liệu\n\t\t\tconst fetchPut = async () => {\n\t\t\t\tconst params = {\n\t\t\t\t\tidUser: localStorage.getItem('id_user'),\n\t\t\t\t\tidProduct: getProduct,\n\t\t\t\t\tcount: getCount,\n\t\t\t\t};\n\n\t\t\t\tconst query = '?' + queryString.stringify(params);\n\n\t\t\t\tconst response = await CartAPI.putToCart(query);\n\t\t\t\tconsole.log(response);\n        //Sau đó thay đổi state loadAPI và load lại hàm useEffect\n        setLoadAPI(true);\n\t\t\t};\n\n\t\t\tfetchPut();\n\n\n\t\t\tconsole.log('Ban Da Dang Nhap!');\n\n\t\t\talertify.set('notifier', 'position', 'bottom-left');\n\t\t\talertify.success('Bạn Đã Sửa Hàng Thành Công!');\n\t\t} else {\n\t\t\t//Nếu không có phiên làm việc của Session User thì mình sẽ xử lý với Redux\n\t\t\tconst data = {\n\t\t\t\tidProduct: getProduct,\n\t\t\t\tidUser: localStorage.getItem('id_user'),\n\t\t\t\tcount: getCount,\n\t\t\t};\n\n\t\t\t//Đưa dữ liệu vào Redux\n\t\t\tconst action = updateCart(data);\n\t\t\tdispatch(action);\n\n\t\t\talertify.set('notifier', 'position', 'bottom-left');\n\t\t\talertify.success('Bạn Đã Sửa Hàng Thành Công!');\n\n\t\t\t//set state loadRedux để nó load lại hàm useEffect để tiếp tục lấy dữ liệu từ redux\n\t\t\tsetLoadRedux({\n\t\t\t\tidProduct: getProduct,\n\t\t\t\tcount: getCount,\n\t\t\t});\n\t\t}\n\t};\n\n\t//Hàm này dùng để redirect đến page checkout\n\tconst [redirect, setRedirect] = useState(false);\n\n\tconst onCheckout = () => {\n\t\tif (!localStorage.getItem('id_user')) {\n\t\t\talertify.set('notifier', 'position', 'bottom-left');\n\t\t\talertify.error('Vui Lòng Kiểm Tra Lại Đăng Nhập!');\n\t\t\treturn;\n\t\t}\n\n\t\tif (cart.length === 0) {\n\t\t\talertify.set('notifier', 'position', 'bottom-left');\n\t\t\talertify.error('Vui Lòng Kiểm Tra Lại Giỏ Hàng!');\n\t\t\treturn;\n\t\t}\n\n\t\tsetRedirect(true);\n\t};\n\n\treturn (\n\t\t<div className='container'>\n\t\t\t<section className='py-5 bg-light'>\n\t\t\t\t<div className='container'>\n\t\t\t\t\t<div className='row px-4 px-lg-5 py-lg-4 align-items-center'>\n\t\t\t\t\t\t<div className='col-lg-6'>\n\t\t\t\t\t\t\t<h1 className='h2 text-uppercase mb-0'>Cart</h1>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='col-lg-6 text-lg-right'>\n\t\t\t\t\t\t\t<nav aria-label='breadcrumb'>\n\t\t\t\t\t\t\t\t<ol className='breadcrumb justify-content-lg-end mb-0 px-0'>\n\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\tclassName='breadcrumb-item active'\n\t\t\t\t\t\t\t\t\t\taria-current='page'>\n\t\t\t\t\t\t\t\t\t\tCart\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ol>\n\t\t\t\t\t\t\t</nav>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t\t<section className='py-5'>\n\t\t\t\t<h2 className='h5 text-uppercase mb-4'>Shopping cart</h2>\n\t\t\t\t<div className='row'>\n\t\t\t\t\t<div className='col-lg-8 mb-4 mb-lg-0'>\n\t\t\t\t\t\t<ListCart\n\t\t\t\t\t\t\tlistCart={cart}\n\t\t\t\t\t\t\tonDeleteCart={onDeleteCart}\n\t\t\t\t\t\t\tonUpdateCount={onUpdateCount}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<div className='bg-light px-4 py-3'>\n\t\t\t\t\t\t\t<div className='row align-items-center text-center'>\n\t\t\t\t\t\t\t\t<div className='col-md-6 mb-3 mb-md-0 text-md-left'>\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tclassName='btn btn-link p-0 text-dark btn-sm'\n\t\t\t\t\t\t\t\t\t\tto={`/shop`}>\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-long-arrow-alt-left mr-2'>\n\t\t\t\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t\t\t</i>\n\t\t\t\t\t\t\t\t\t\tContinue shopping\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className='col-md-6 text-md-right'>\n\t\t\t\t\t\t\t\t\t{redirect && <Redirect to={'/checkout'} />}\n\t\t\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\t\t\tclassName='btn btn-outline-dark btn-sm'\n\t\t\t\t\t\t\t\t\t\tonClick={onCheckout}>\n\t\t\t\t\t\t\t\t\t\tProceed to checkout\n\t\t\t\t\t\t\t\t\t\t<i className='fas fa-long-arrow-alt-right ml-2'></i>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='col-lg-4'>\n\t\t\t\t\t\t<div className='card border-0 rounded-0 p-lg-4 bg-light'>\n\t\t\t\t\t\t\t<div className='card-body'>\n\t\t\t\t\t\t\t\t<h5 className='text-uppercase mb-4'>Cart total</h5>\n\t\t\t\t\t\t\t\t<ul className='list-unstyled mb-0'>\n\t\t\t\t\t\t\t\t\t<li className='d-flex align-items-center justify-content-between'>\n\t\t\t\t\t\t\t\t\t\t<strong className='text-uppercase small font-weight-bold'>\n\t\t\t\t\t\t\t\t\t\t\tSubtotal\n\t\t\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t\t\t<span className='text-muted small'>\n\t\t\t\t\t\t\t\t\t\t\t{convertMoney(total)} VND\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t<li className='border-bottom my-2'></li>\n\t\t\t\t\t\t\t\t\t<li className='d-flex align-items-center justify-content-between mb-4'>\n\t\t\t\t\t\t\t\t\t\t<strong className='text-uppercase small font-weight-bold'>\n\t\t\t\t\t\t\t\t\t\t\tTotal\n\t\t\t\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t\t\t\t<span>{convertMoney(total)} VND</span>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</section>\n\t\t</div>\n\t);\n}\n\nexport default Cart;\n"],"sourceRoot":""}